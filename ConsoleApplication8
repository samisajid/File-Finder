#include <iostream>
#include <boost/filesystem.hpp>
using namespace std;
using namespace boost::filesystem;

int main(int argc, char* argv[])
{
	if (argc < 2)
	{
		cout << "Usage: tut3 path\n";
		return 1;
	}

	path p(argv[1]);
	try
	{
		if (exists(p))
		{
			if (is_regular_file(p))
				cout << p << " size is " << file_size(p) << '\n';

			else if (is_directory(p))
			{
				cout << p << " is a directory containing:\n";

				for (directory_entry& x : recursive_directory_iterator(p)) {
					if (x.filename().string().find("vc141") != string::npos) {
						cout << "kayn " << x.path() << endl;
					}

				}
			}
			else
				cout << p << " exists, but is not a regular file or directory\n";
		}
		else
			cout << p << " does not exist\n";
	}

	catch (const filesystem_error& ex)
	{
		cout << ex.what() << '\n';
	}

	return 0;
}
